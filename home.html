<!DOCTYPE html>
<html>
<head>
	<title>Page Title</title>
	<style>
table, th, td {
  border: 1px solid black;
  border-collapse: collapse;
}
</style>
	
</head>

	

	
</head>

<body>
	{% extends "template.html" %}
    {% block content %}

	<h2> Thanks for Visiting!</h2>
	<form id="form1" action = "http://localhost:5000/" method = "POST">
         <p id="fname">Enter your name: </p>
		 <input id="inputname" type = "text" name=username required autofocus>
		 <br>
		 <br>
		 <br>
		 <p id="fname">Enter your email: </p>
		 <input type="email" id="inputUsername" name="username" class="form-control" placeholder="Email address">
         <br>
		 <br>
		 <input type="password" id="inputPassword" name="password" class="form-control" placeholder="Password">       
		 <h2 id="new"></h2>
		 
		 <br>
		 <br>
	</form>
          <div id="mytablediv">
		  <table id="student_data" class="table table-bordered table-striped table-hover" style="width:100%">
			<th>Student Number</th>
			<th>First Name</th>
			<th>Last Name</th>
			<th>DOB</th>
			</tr>
			</thead>
			<tbody></tbody>
			</table>
		  	</div>
     
  <br>
  <br>
  <br>
  
		<button id=reset>Reset</button>
	 </div>
    </div>
	
	{% endblock %}
</body>
<script src="http://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script type=text/javascript>
  		$SCRIPT_ROOT = {{ request.script_root|tojson|safe }};
	</script>
	 <script type="text/javascript">
      $(document).ready(function(){
			$("#reset").click(function(event){
			event.preventDefault();
			var table = document.createElement("table");
			
			$.getJSON($SCRIPT_ROOT + "/user", {
					username: $('input[name="username"]').val() },
					function(data) {
					$("#new").append('<p> Firstname: ' + data.firstname+ '</p>');
					$("#new").append('<p> Lastname: ' + data.lastname+ '</p>')
            				if (table !== null) {
              			table.destroy();
              			table = null;
              		$("#mytable tbody").empty();
            			}
				 	table = $("#mytable").DataTable({
              					data: data.my_table,
              					columns: data.columns
            });
		  });
  		});
	  });
	  $(document).ready(function(){
	  	$.getJSON("df.json", function(data){
			var student_data = ' ';
			$.each(data, function(key, value){
				student_data += '<tr>';
				student_data += '<td>'+value.studentnumber+'</td>'';
				student_data += '<td>'+value.firstname+'</td>';
				student_data += '<td>'+value.lastname+'</td>';
				student_data += '<td>'+value.dob+'</td>';
				student_data += '</tr>';
			});
			$('#student_data').append(student_data);
			
		});
	  });
	</script>
</html>
